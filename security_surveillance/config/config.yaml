# Security & Surveillance System Configuration

camera:
  source: "rtsp://172.16.122.6:554/1"  # WiFi IP Camera RTSP stream (sub stream)
  width: 640
  height: 480
  fps: 20  # Reduced from 30 for stability

detection:
  model_path: "data/models/yolov8n.pt"
  confidence_threshold: 0.5
  input_size: 416  # 320, 416, or 640
  frame_skip: 2  # Process every Nth frame
  target_classes: ["person"]  # Only detect people

zones:
  enabled: true
  definitions:
    - name: "entrance"
      x1: 100
      y1: 100
      x2: 300
      y2: 300
      color: [0, 255, 0]  # Green
      alert_level: "low"
    
    - name: "restricted"
      x1: 400
      y1: 200
      x2: 600
      y2: 400
      color: [0, 0, 255]  # Red
      alert_level: "high"

alerts:
  gpio_enabled: false  # Set to true when running on Pi with GPIO
  led_green_pin: 17
  led_red_pin: 27
  buzzer_pin: 22
  alert_duration: 3  # seconds
  cooldown: 5  # seconds between alerts

recording:
  enabled: true
  output_dir: "data/recordings"
  codec: "mp4v"  # H264 for Pi, mp4v for development
  fps: 10
  duration: 10  # seconds per clip
  max_storage_mb: 1000  # Auto-delete old recordings

behavioral_learning:
  enabled: true
  learning_period_hours: 48
  normal_hours_start: 8  # 8 AM
  normal_hours_end: 18  # 6 PM
  normal_days: [1, 2, 3, 4, 5]  # Monday-Friday
  anomaly_threshold: 0.7

tamper_detection:
  enabled: true
  brightness_threshold: 20  # Alert if avg brightness drops below this
  motion_variance_threshold: 10  # Alert if scene variance drops

logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  file: "data/logs/system.log"
  max_size_mb: 10
  backup_count: 3

# Health Monitoring System Configuration (Smart Agriculture)
health_system:
  # Model Configuration
  model:
    keras_path: "data/models/mobilenet_plantvillage.h5"
    tflite_path: "data/models/mobilenet_plantvillage.tflite"
    classes_path: "data/models/plantvillage_classes.json"
    use_tflite: true  # Enabled for Raspberry Pi 3 optimization (64x faster, 73% smaller)
    input_size: 224  # MobileNetV2 input size
  
  # Detection Settings
  detection:
    interval: 5  # seconds between detections
    confidence_threshold: 0.35  # Minimum confidence for valid detection (lowered for better sensitivity)
    max_detections_per_hour: 100  # Rate limiting
    save_images: true  # Save detection images
    image_quality: 85  # JPEG quality (0-100)
  
  # Camera Settings
  camera:
    source: "rtsp://172.16.122.6:554/1"  # Same as security camera
    width: 640
    height: 480
    fps: 15  # Lower FPS for agriculture monitoring
    auto_exposure: true
    auto_white_balance: true
  
  # Preprocessing Options
  preprocessing:
    enable_clahe: false  # Contrast enhancement
    clahe_clip_limit: 2.0
    clahe_tile_grid_size: [8, 8]
    enable_blur: false  # Noise reduction
    blur_kernel_size: [3, 3]
    normalization_method: "imagenet"  # standard, imagenet, minmax
    maintain_aspect_ratio: false  # Resize behavior
  
  # Database Settings
  database:
    path: "data/logs/health_events.db"
    retention_days: 90  # Auto-delete records older than this
    export_format: "csv"  # csv, json
    auto_backup: true
    backup_interval_hours: 24
  
  # Alert Configuration
  alerts:
    enable_email: false  # Email notifications
    enable_sms: false  # SMS notifications
    severity_levels:
      low: ["Healthy"]
      medium: ["Early_blight", "Late_blight", "Leaf_Mold"]
      high: ["Bacterial_spot", "Target_Spot", "Septoria_leaf_spot"]
      critical: ["Tomato_mosaic_virus", "Yellow_Leaf_Curl_Virus"]
    notification_cooldown: 300  # seconds between same-disease alerts
  
  # Crop Monitoring
  crops:
    monitored: ["Tomato", "Potato", "Pepper", "Grape", "Apple", "Peach"]
    rotation_interval: 30  # days between crop checks
    health_check_frequency: "daily"  # hourly, daily, weekly
  
  # Disease Recommendations
  recommendations:
    database_path: "data/disease_recommendations.json"
    include_organic_options: true
    include_chemical_options: true
    language: "en"  # en, es, fr, etc.
  
  # Performance Optimization
  optimization:
    enable_gpu: false  # GPU acceleration (if available)
    enable_multithreading: true
    thread_count: 2  # Number of processing threads
    memory_limit_mb: 512  # Maximum memory usage
    batch_processing: false  # Process multiple images at once
    batch_size: 4
  
  # Image Upload Settings
  upload:
    max_file_size_mb: 10
    allowed_formats: ["jpg", "jpeg", "png"]
    storage_path: "data/uploaded_images"
    auto_cleanup: true
    cleanup_after_days: 7
